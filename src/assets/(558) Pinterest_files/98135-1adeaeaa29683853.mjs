(self.modernJsonp=self.modernJsonp||[]).push([["98135"],{399465:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MoreIdeasPreviewStory_story",selections:[{alias:null,args:null,kind:"ScalarField",name:"referringSource",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"objects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:"images_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"474x")'}],type:"Pin",abstractKey:null}],storageKey:null}],type:"Story",abstractKey:null};o.hash="f6776ff7c6fc3ce9a1f4b72a5dbaa0c2";let n=o},73910:function(e,t,i){i.d(t,{Z:()=>s});var o=i(618003);let n=new Set([92]),r=new Set([154]);function s(e){let t=[];return e.forEach(e=>{if("story"===e.type?n.has(e.container_type)||r.has(e.container_type)||o.v8.has(e.story_type)||o.AW.has(e.story_type):1){let i=t[t.length-1];Array.isArray(i)?i.push(e):t.push([e])}else t.push(e)}),t}},104999:function(e,t,i){i.d(t,{Z:()=>n});var o=i(230201);let n=()=>(0,o.u)().logContextEvent},174481:function(e,t,i){i.d(t,{Z:()=>l});var o=i(667294);let n=null,r=!1,s=0,a=()=>{n&&clearTimeout(n),r=!0,n=setTimeout(()=>{r=!1},100)},l=()=>{let[e,t]=(0,o.useState)(!1),i=(0,o.useRef)(null);(0,o.useEffect)(()=>(0===s&&window.addEventListener("scroll",a),s+=1,()=>{i.current&&clearTimeout(i.current),(s-=1)||window.removeEventListener("scroll",a)}),[]);let n=e=>{i.current&&clearTimeout(i.current),i.current=e&&r?setTimeout(()=>n(!0),100):setTimeout(()=>{t(e)},32)};return{isHovering:e,hoverHandlers:(0,o.useRef)({onMouseOver:()=>n(!0),onMouseLeave:()=>n(!1)}).current}}},662529:function(e,t,i){i.d(t,{a:()=>h,B:()=>c});var o=i(667294),n=i(213491),r=i(47755);let s={boardMap:{}};function a(e,t){if(e=e||s,"BLOCKING_ACTIONS_UPDATED"===t.type){let{payload:{boardId:i,blockingActions:o}}=t,n=null,r=null,s={};return o.forEach(({section_id:e,progress:t,id:i,created_timestamp:o})=>{let a={id:i,createdAt:o,progress:t};e?"-1"===e?n=a:s[e]=a:r=a}),{...e,boardMap:{...e.boardMap,[i]:{wholeBoard:n,unorganized:r,sectionMap:s}}}}return e}var l=i(785893);let{Provider:d,getMaybe:c}=(0,n.Z)("BlockingAction");async function u(e){let t=await (0,r.Z)({url:"/v3/boards/{board}/",urlParams:{board:e},data:{fields:["board.id","board.blocking_actions"]}});return new Promise((e,i)=>{let o=t&&t.resource_response&&t.resource_response.data&&t.resource_response.data.blocking_actions;if(!o)return void i(Error("No blocking actions found in the response"));e(o)})}function h({children:e}){let[t,i]=(0,o.useReducer)(a,s),n=(0,o.useCallback)(e=>u(e).then(t=>(i({type:"BLOCKING_ACTIONS_UPDATED",payload:{boardId:e,blockingActions:t}}),t)),[]),r=(0,o.useMemo)(()=>({blockingActions:t,fetchBlockingActions:n}),[t,n]);return(0,l.jsx)(d,{value:r,children:e})}},421951:function(e,t,i){i.d(t,{Z:()=>v});var o=i(577356),n=i(662529),r=i(686659),s=i(667294),a=i(391995),l=i(100424),d=i(24246),c=i(696749),u=i(739405),h=i(785893);function p(e,t,i){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class _ extends s.Component{constructor(...e){super(...e),p(this,"state",{hiding:!1,visible:!1}),p(this,"handleHide",()=>{this.setState({hiding:!0}),this.timeout=window.setTimeout(this.props.onHide,l.Vg)}),p(this,"handleMouseEnter",()=>{window.clearTimeout(this.timeout)}),p(this,"handleMouseLeave",()=>{this.timeout=window.setTimeout(this.handleHide,this.props.duration||2e3)})}componentDidMount(){this.toastText&&(window.setTimeout(()=>{this.setState({visible:!0})},100),this.timeout=window.setTimeout(this.handleHide,this.props.duration||2e3))}get toastText(){let{actionType:e,actionStatus:t,location:i}=this.props,{isSection:o,name:n}=i,r="completed"===t;switch(e){case"create_section":return r?this.props.i18n._('Created section', 'toast text to indicate a section has been created successfully', 'toast text to indicate a section has been created successfully'):this.props.i18n._('Creating section', 'toast text to indicate a section is being created', 'toast text to indicate a section is being created');case"delete_pins":if(o)return r?(0,c.Z)(this.props.i18n._('Deleted Pins from {{sectionName}}', 'toast text to notify Pins have been deleted from a section', 'toast text to notify Pins have been deleted from a section sectionName: name of the section that is being deleted from'),{sectionName:n}):(0,c.Z)(this.props.i18n._('Deleting Pins from {{sectionName}}', 'toast text to notify Pins are being deleted from a section', 'toast text to notify Pins are being deleted from a section sectionName: name of the section that is being deleted from'),{sectionName:n});return r?(0,c.Z)(this.props.i18n._('Deleted Pins from {{boardName}}', 'toast text to notify Pins have been deleted from a board', 'toast text to notify Pins have been deleted from a board boardName: name of the board that is being deleted from'),{boardName:n}):(0,c.Z)(this.props.i18n._('Deleting Pins from {{boardName}}', 'toast text to notify Pins are being deleted from a board', 'toast text to notify Pins are being deleted from a board boardName: name of the board that is being deleted from'),{boardName:n});case"move_pins":if(o)return r?(0,c.Z)(this.props.i18n._('Moved to {{sectionName}}', 'toast text to notify pins have been moved to this section', 'toast text to notify pins have been moved to this section sectionName: name of the section that is being moved to'),{sectionName:n}):(0,c.Z)(this.props.i18n._('Moving to {{sectionName}}', 'toast text to notify pins are being moved to this section', 'toast text to notify pins are being moved to this section sectionName: name of the section that is being moved to'),{sectionName:n});return r?(0,c.Z)(this.props.i18n._('Moved to {{boardName}}', 'toast text to notify pins have been moved to this board', 'toast text to notify pins have been moved to this board boardName: name of the board that is being moved to'),{boardName:n}):(0,c.Z)(this.props.i18n._('Moving to {{boardName}}', 'toast text to notify pins are being moved to this board', 'toast text to notify pins are being moved to this board boardName: name of the board that is being moved to'),{boardName:n});case"merge":if(o)return r?(0,c.Z)(this.props.i18n._('Moved to {{sectionName}}', 'toast text to notify another section has been merged to this section', 'toast text to notify anotehr section has been merged to this section sectionName: name of the section that is being merged to'),{sectionName:n}):(0,c.Z)(this.props.i18n._('Moving to {{sectionName}}', 'toast text to notify another section is being merged to this section', 'toast text to notify another section is being merged to this section sectionName: name of the section that is being merged to'),{sectionName:n});return r?(0,c.Z)(this.props.i18n._('Moved to {{boardName}}', 'toast text to notify another board has been merged to this board', 'toast text to notify another board has been merged to this board boardName: name of the board that is being merged to'),{boardName:n}):(0,c.Z)(this.props.i18n._('Moving to {{boardName}}', 'toast text to notify another board is being merged to this board', 'toast text to notify another board is being merged to this board boardName: name of the board that is being merged to'),{boardName:n});default:return null}}render(){let{actionStatus:e,deviceType:t}=this.props,{visible:i,hiding:o}=this.state,{toastText:n}=this,{marginTop:r,opacity:s,position:d,pointerEvents:c,transform:u,transition:p,visibility:_}=(0,l.ZP)({deviceType:t,hiding:o,visible:i});return n?(0,h.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{transform:u,transition:p,visibility:_,pointerEvents:c}},marginTop:r,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,opacity:s,position:d,children:(0,h.jsx)(a.FN,{text:n,type:"completed"===e?"default":"progress"})}):null}}function m(e){(0,s.useEffect)(()=>{(0,r.Z)("BoardBlockingActionToast","/app/www/BlockingActionsContext/BoardBlockingActionToast.tsx")},[]);let t=(0,u.ZP)(),i=(0,d.Z)();return(0,h.jsx)(_,{...e,deviceType:t,i18n:i})}let f=["merge","move_pins","create_section"],g=0,b={},x=(e,t,i,o)=>({hideToast:n})=>(0,h.jsx)(m,{actionStatus:e,actionType:t,duration:2e3,location:{name:o?o.title??"":i.name??"",isSection:!!o},onHide:n});function v(){let{showToast:e}=(0,o.dI)(),{fetchBlockingActions:t}=(0,n.B)()??{fetchBlockingActions:e=>new Promise(e=>e([]))};return{showBlockingActionToast:({actionType:i,board:o,section:n})=>{e(x("inProgress",i,o,n)),function({check:e,checkDelay:t,checkInterval:i,onComplete:o}){let n=`timeout${g}`;g+=1;let r=()=>{let t=Date.now();e().then(e=>{let s=Date.now()-t;e?(o(),delete b[n]):b[n]=setTimeout(r,Math.max(1e3,i-s))}).catch(()=>{delete b[n]})};b[n]=setTimeout(r,t)}({check:()=>t(o.id).then(e=>!function({blockingActions:e,actionType:t,boardId:i,sectionId:o}){return e.find(e=>(function(e){switch(e){case 22:return"delete_board";case 7172:case 7173:return"merge";case 900:case 7158:case 7109:return"delete_pins";case 901:case 7108:return"move_pins";case 7100:return"create_section";case 7102:return"delete_section";default:return null}})(e.action_type)===t&&!(f.includes(e.action_type)&&e.is_origin)&&e.board_id===i&&(o?o===e.section_id:!e.section_id||"-1"===e.section_id)&&1!==e.progress)}({blockingActions:e,actionType:i,boardId:o.id,sectionId:n&&n.id})),checkDelay:2e3,checkInterval:5e3,onComplete:()=>e(x("completed",i,o,n))})}}}},680650:function(e,t,i){i.d(t,{Df:()=>n,W$:()=>o,f4:()=>r});let o=(e,t)=>{let i="object"==typeof t?.owner?t.owner?.id:t?.owner;return e.isAuth&&i===e.id},n=(e,t)=>!!(e.isAuth&&t.collaborated_by_me),r=(e,t)=>o(e,t)?3069:3070},228612:function(e,t,i){i.d(t,{EQ:()=>l,JC:()=>a,S6:()=>d,_S:()=>c});var o=i(581722),n=i(213491),r=i(785893);let{Provider:s,get:a,getMaybe:l}=(0,n.Z)("Pins");function d(){let e=a();return t=>e[t]}function c({children:e}){let t=(0,o.v9)(({pins:e})=>e,o.wU);return(0,r.jsx)(s,{value:t,children:e})}},838855:function(e,t,i){i.d(t,{G:()=>x,Z:()=>v});var o=i(686659),n=i(667294),r=i(391995),s=i(261954),a=i(309947),l=i(806513),d=i(426161),c=i(70625),u=i(739405),h=i(893957),p=i(596663),_=i(471310),m=i(989045),f=i(759302),g=i(589247),b=i(785893);let x=25;function v({align:e,customLayoutType:t,getColumnSpanConfig:i,getResponsiveModuleConfigForSecondItem:x,emptyState:v,feedItems:y,feedKey:w,maxColumns:P,minColumns:j,pagination:{hasNext:S,isLoadingNext:Z,loadNext:C,refetch:A},pullToRefresh:E,renderFeedItem:I,serverRender:z,isLoadingStateEnabled:T,isLoadingAccessibilityLabel:B,isLoadedAccessibilityLabel:D,layout:M,forceShowLoadingState:N}){(0,n.useEffect)(()=>{(0,o.Z)("SimpleFeed","/app/www/SimpleFeed.tsx")},[]);let O=(0,u.HG)(),{experimentalColumnWidth:k,experimentalGutter:L}=(0,a.Z)(),[R,H]=(0,n.useState)(!1),F=1===P?window.innerWidth:void 0,W="userSearch"===t?window.innerWidth-16:200,$=Z&&0===y.length&&!R&&!T,K="desktopFlashlight"===t||"ideaPage"===t&&O?-2:l.qG,G=j??2;return"userSearch"===t&&(G=1),(0,h.Z)(()=>(window.addEventListener("online",C),()=>window.removeEventListener("online",C))),(0,b.jsxs)(r.xu,{"data-test-id":"MobileFeed",children:[(0,b.jsx)(_.Z,{enabled:!!E,onPull:()=>{A(),H(!0)},refreshing:R}),(0,b.jsxs)(r.xu,{"data-test-id":"grid",marginEnd:K,marginStart:K,opacity:R?50:100,children:[(0,b.jsx)(d.Z,{isAtEndOfFeed:!S,isPlaceholderGrid:T&&Z&&!y.length,itemCount:y.length,children:y.length?(0,b.jsx)(r.xu,{"data-test-id":"feed",marginTop:(0,p.kk)({isDesktop:O}),children:(0,b.jsx)(c.Z.Consumer,{children:o=>(0,b.jsx)(n.Fragment,{children:(0,b.jsx)(g.Z,{children:(0,b.jsx)(s.default,{_getResponsiveModuleConfigForSecondItem:x,align:e||("ideaPage"===t?"start":void 0),cacheKey:w,columnWidth:O?k??l.yF:F??W,getColumnSpanConfig:i,gutterWidth:O?L??4*l.jC:void 0,id:z?w:void 0,isFetching:N??Z,isLoadedAccessibilityLabel:D??"",isLoadingAccessibilityLabel:B??"",isLoadingStateEnabled:N??!!T,items:y,layout:M??void 0,loadItems:C,maxColumns:P,minCols:G,optOutFluidGridExperiment:null!=P,renderItem:({data:e,itemIdx:t})=>I(e,t),scrollContainerRef:o,serverRender:z})})})})}):Z?(0,b.jsx)(m.Z,{}):v??null}),$&&(0,b.jsx)(r.xu,{column:12,paddingY:2,children:(0,b.jsx)(f.Z,{partialViewportWidth:"desktopFlashlight"===t})})]})]})}},908808:function(e,t,i){function o(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function n(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}i.d(t,{HG:()=>n,OQ:()=>r,hd:()=>o});let r=(e,t)=>({type:"BOARD_SECTION_EDIT",payload:t})},569510:function(e,t,i){i.d(t,{Z:()=>d});var o=i(47755),n=i(660322),r=i(908808),s=i(773382),a=i(779686),l=i(438274);function d(e,t,i){return d=>(0,o.Z)({url:"/v3/board/sections/{source_section}/merge/{target_section}/",urlParams:{source_section:t,target_section:i},method:"POST",data:{fields:["boardsection.id","boardsection.board()","board.id","board.blocking_actions"]}}).then(o=>Promise.all([d((0,r.HG)(e,t)),d((0,n.jB)("BoardSectionsRepinResource",{board_id:e})),d((0,s.Z)(i)),d((0,a.N8)(l.Z.BOARD_SECTION_PINS,i))]).then(()=>o))}},918062:function(e,t,i){i.d(t,{Z:()=>x});var o=i(686659),n=i(667294),r=i(391995),s=i(257680),a=i(935059),l=i(24246),d=i(661376),c=i(73910),u=i(739405),h=i(200619),p=i(601871),_=i(285676),m=i(833847),f=i(645479),g=i(838855),b=i(785893);function x(e){(0,n.useEffect)(()=>{(0,o.Z)("BoardExpandedSections","/app/www/save/board/BoardDefaultTabContent/BoardExpandedSections.tsx")},[]);let t=(0,u.HG)(),i=(0,a.Z)(),x=(0,l.Z)(),v=(0,h.Z)(),y=(0,p.lJ)(i,v),{board:w,onLoadedAll:P,viewParameter:j}=e,{id:S,privacy:Z}=w,C=(0,m.Z)(w),{data:A,isAtEnd:E,isFetching:I,isLoaded:z}=(0,d.Z)({name:"ApiResource",options:{data:{fields:["pin.cacheable_id","pin.created_at","pin.description","pin.domain","pin.grid_title","pin.id","pin.is_downstream_promotion","pin.is_playable","pin.is_repin","pin.is_uploaded","pin.is_video","pin.images[170x,136x136,236x,474x,736x,orig]","pin.link","pin.price_currency","pin.price_value","pin.rich_summary()","pin.repin_count","pin.title","pin.type"]},url:`/v3/board/${S}/expanded_sections/`,redux_normalize_feed:!0,...(0,s.Z)(Z)&&y?{orbac_subject_id:y}:{}}});if((0,n.useEffect)(()=>{E&&P()},[E,P]),!z)return(0,b.jsx)(r.xH,{accessibilityLabel:x._('Board sections loading spinner', ' - ', ' -- '),show:!0});let T=(0,c.Z)(A||[]),B={loadNext:()=>void 0,hasNext:E,isLoadingNext:I,refetch:()=>void 0};return(0,b.jsx)(r.xu,{"data-test-id":"board-expanded-sections",id:"board-expanded-sections-wrapper",paddingX:t?2:1,width:"100%",children:T.map((e,i)=>{if(Array.isArray(e)){let t=`board-expanded-sections-feed-${i}`;return(0,b.jsx)(g.Z,{feedItems:e,feedKey:`board-expanded-sections:${S}`,pagination:B,renderFeedItem:(e,t)=>(0,b.jsx)(f.Z,{children:(0,b.jsx)(_.r,{pinId:e.id,pinKey:{type:"Legacy",data:e},slotIndex:t,surface:C?"FeaturedBoardPinGrid":"BaseBoardPinGrid",viewParameter:j,viewType:1})})},t)}return"story"===e.type&&"board_expanded_section_title"===e.story_type?(0,b.jsxs)(r.xu,{marginBottom:t?4:2,marginTop:t?8:4,paddingX:t?3:1,children:[(0,b.jsx)(r.qd,{size:t?"600":"400",children:e.title?.format??""}),e.description?.format?(0,b.jsx)(r.xu,{marginTop:2,children:(0,b.jsx)(r.xv,{size:t?"300":"100",children:e.description.format})}):null]},`board-expanded-sections-story-${e.id}`):null})})}},144337:function(e,t,i){i.d(t,{Z:()=>e_});var o=i(667294),n=i(391995),r=i(230201),s=i(943152),a=i(309947),l=i(935059),d=i(739405),c=i(329577),u=i(914253),h=i(686659),p=i(24246),_=i(4533),m=i(34550),f=i(680650),g=i(785893);function b(e,t,i){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let x=Object.freeze({}),v={custom:11566,newest:11564,oldest:11565,most_comments:11563,most_reactions:11562,by_pinner:11561};class y extends o.Component{constructor(...e){super(...e),b(this,"handleChange",({event:e,value:t})=>{let{onChange:i,viewer:o,board:n}=this.props;e.stopPropagation(),window.scrollTo({top:0,left:0,behavior:"smooth"}),((e,t,i)=>{if(!e.isAuth)return;let o=m.ZP.getItem(_.iT)||x,n=o[e.id]||{},r={...o,[e.id]:{...n,[t.id]:i}};m.ZP.setItem(_.iT,r)})(o,n,t),i&&i(t),this.props.logContextEvent({event_type:101,view_type:5,view_parameter:(0,f.f4)(o,n),component:13475,element:v[t],aux_data:{board_id:n.id}})}),b(this,"logDropdownClick",()=>{let{board:e,viewer:t}=this.props;this.props.logContextEvent({event_type:101,view_type:5,view_parameter:(0,f.f4)(t,e),component:13486,element:11567,aux_data:{board_id:e.id}})}),b(this,"handleKeyPress",e=>{let{charCode:t=0}=e;32===t&&(e.preventDefault(),this.logDropdownClick())})}render(){let{currentView:e}=this.props,t=[{value:"custom",label:this.props.i18n._('Custom', 'Option for users to filter their Pins in a custom order (as it currently is)', 'Option for users to filter their Pins in a custom order (as it currently is)')},{value:"most_reactions",label:this.props.i18n._('Most reactions', 'Option for users to filter their Pins by the most reactions', 'Option for users to filter their Pins by the most reactions')}];return(0,g.jsx)("div",{onClick:this.logDropdownClick,onKeyPress:this.handleKeyPress,role:"listbox",tabIndex:0,children:(0,g.jsx)(n.EI,{id:"gbFilterSelectlist",onChange:this.handleChange,size:"lg",value:e,children:t.map(e=>(0,g.jsx)(n.EI.Option,{...e},e.label))})})}}let w=function(e){let{logContextEvent:t}=(0,r.u)(),i=(0,p.Z)();return(0,g.jsx)(y,{...e,i18n:i,logContextEvent:t})};var P=i(828569),j=i(661376);function S({selected:e}){(0,o.useEffect)(()=>{(0,h.Z)("DensityIcons","/app/www/save/board/PinRepViewSelector/DensityIcons.tsx")},[]);let t=(0,p.Z)();return(0,g.jsx)(n.JO,{accessibilityLabel:t._('Dense', 'Label for selecting the dense pin density view', 'Label for selecting the dense pin density view'),color:e?"default":"subtle",icon:"view-type-dense",size:24})}function Z({selected:e}){(0,o.useEffect)(()=>{(0,h.Z)("DensityIcons","/app/www/save/board/PinRepViewSelector/DensityIcons.tsx")},[]);let t=(0,p.Z)();return(0,g.jsx)(n.JO,{accessibilityLabel:t._('Regular', 'Label for selecting the regular pin density view', 'Label for selecting the regular pin density view'),color:e?"default":"subtle",icon:"view-type-default",size:24})}var C=i(249347),A=i(189634);class E extends o.Component{constructor(...e){var t,i,o;super(...e),t="handleItemChange",i=({activeIndex:e})=>{let{viewType:t,component:i,pinView:o,logContextEvent:n}=this.props,r=0===e?"regular":"dense";(0,C.Z)({boardDensity:r,component:i,viewType:t},n),(0,A.Z)({density:r,surface:o}),"board"===o?this.props.updateBoardPinDensity?.(r):this.props.updateProfilePinDensity?.(r)},(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}componentDidUpdate(){let{metadata:e,pinView:t,updatedBoardPinDensity:i,updateBoardPinDensity:o,updateProfilePinDensity:n}=this.props;if(e&&e.data&&""===i){let{profile_pin_rep_view_type:i,board_pin_rep_view_type:r}=e.data;"board"===t&&(i?o?.(i):o?.("regular")),"profile"===t&&(r?n?.(r):n?.("regular"))}}render(){let{metadata:e,updatedBoardPinDensity:t}=this.props;return e&&e.data?(0,g.jsx)("div",{className:"OwnBoardSelector",children:(0,g.jsx)(n.sY,{items:[(0,g.jsx)(Z,{selected:"regular"===t}),(0,g.jsx)(S,{selected:"dense"===t})],onChange:this.handleItemChange,responsive:!0,selectedItemIndex:+("dense"===t)})}):null}}function I(e){(0,o.useEffect)(()=>{(0,h.Z)("PinRepViewSelector","/app/www/save/board/PinRepViewSelector/PinRepViewSelector.tsx")},[]);let t=(0,c.WG)(),{logContextEvent:i}=(0,r.u)(),n=(0,l.Z)(),s=(0,j.Z)({name:"UserMetadataResource",options:{user:{id:n.isAuth?n.username:""}},noCache:!0}),a=("board"===e.pinView?t?.boardPinDensity:t?.profilePinDensity)??"";return(0,g.jsx)(E,{...e,logContextEvent:i,metadata:s,updateBoardPinDensity:t?.setBoardPinDensity,updatedBoardPinDensity:a,updateProfilePinDensity:t?.setProfilePinDensity})}function z({board:e,currentView:t,inBoardOrganizationMode:i,onContentViewChange:r,onOrganizeClick:s,pinCount:a,showSortOptions:d}){(0,o.useEffect)(()=>{(0,h.Z)("BoardPinsActionBar","/app/www/save/board/BoardDefaultTabContent/BoardPinsActionBar.tsx")},[]);let c=(0,p.Z)(),u=(0,l.Z)();return(0,g.jsxs)(n.xu,{alignItems:"center",direction:"row",display:"flex",marginEnd:-1,marginStart:-1,children:[(0,g.jsx)(n.xu,{flex:"grow",paddingX:1,children:(0,g.jsx)(n.qd,{children:c._('Pins', 'Heading for Pins outside of board sections on board page', 'Heading for Pins outside of board sections on board page')})}),d&&a<=500&&(0,g.jsx)(n.xu,{paddingX:2,children:(0,g.jsx)(w,{board:e,currentView:t,onChange:r,viewer:u})}),a>=P.Ev&&(0,g.jsxs)(o.Fragment,{children:[a>=P.IK&&(0,g.jsx)(I,{component:13183,pinView:"board",viewType:5}),!i&&(0,g.jsx)(n.xu,{paddingX:2,children:(0,g.jsx)(n.zx,{fullWidth:!0,onClick:s,text:c._('Organize', 'The board organization button', 'The board organization button')})})]})]})}var T=i(581722),B=i(257680),D=i(250026),M=i(200619),N=i(601871),O=i(47755),k=i(779686),L=i(438274),R=i(918062),H=i(2587),F=i(828801),W=i(728027),$=i(261954),K=i(902123),G=i(595403),V=i(742346);function U(e,t,i){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function q(e){let{allowReordering:t,board:i,canEdit:o,display:r,dragDrop:s,index:a,isDragging:l,oneTapMovePinsHandler:d,onShowEditSectionModal:c,organizeMode:u,section:h}=e,p=s&&s.target;return(0,g.jsx)(n.xu,{height:"100%",children:(0,g.jsx)(K.q,{children:({focused:e,hovered:n,onBlur:s,onFocus:_,onMouseEnter:m,onMouseLeave:f})=>(0,g.jsx)(G.Z,{allowReordering:t,board:i,boardSection:h,canEdit:o,display:r,focused:e,hovered:n,inOrganizationMode:u,isDragging:l,isMergeTarget:!!p&&"merge"===p.action&&a===p.index,onBlur:e=>{let{currentTarget:t}=e;setTimeout(()=>{t.contains(document.activeElement)||s()},0)},oneTapMovePinsHandler:d,onFocus:_,onMouseEnter:m,onMouseLeave:f,onShowEditSectionModal:c})})})}function J(e){let{allowReordering:t,board:i,canEdit:o,dragDrop:r,handleSectionDragBegin:s,handleSectionDragEnd:l,handleSectionDragHover:d,isDragging:u,isDragWithinBounds:h,oneTapMovePinsHandler:p,onShowEditSectionModal:_,organizeMode:m,sections:f}=e,{experimentalGutter:b}=(0,a.Z)(),x=(0,c.WG)()?.boardPinDensity??"",v=(0,V.EE)(x);return(0,g.jsx)($.default,{cacheKey:`board-boardsections:${i.id}`,columnWidth:v,gutterWidth:b,items:f,layout:"flexible",minCols:2,renderItem:({data:e,itemIdx:a})=>{let c=(0,g.jsx)(q,{allowReordering:t,board:i,canEdit:o,display:"responsive",dragDrop:r,index:a,isDragging:u,oneTapMovePinsHandler:p,onShowEditSectionModal:_,organizeMode:m,section:e});return(0,g.jsx)(n.xu,{height:"100%",children:t?(0,g.jsx)(H.Z,{index:a,onDragBegin:s,onDragEnd:l,onDragHover:d,type:H.y.Section,children:(0,g.jsx)("div",{style:{opacity:u&&!h?.5:1},children:c})}):(0,g.jsx)(n.xu,{height:"100%",children:c})},e.id)}})}class X extends o.Component{constructor(...e){super(...e),U(this,"state",{dragDrop:null,sectionIds:this.props.sections.map(e=>e.id??"")}),U(this,"cancelHoverTimeout",()=>{let{dragHoverTimeout:e}=this;e&&clearTimeout(e.timeoutId),this.dragHoverTimeout=null}),U(this,"dragHoverTimeout",null),U(this,"isDragging",()=>!!this.state.dragDrop),U(this,"handleSectionDragBegin",e=>{this.setState({dragDrop:{previewIndex:e,sourceIndex:e,target:null}})}),U(this,"handleSectionDragHover",(e,t)=>{var i;let{dragDrop:o}=this.state,n=this.props.allowReordering;if(!t||!o)return;let{previewIndex:r}=o,s=function({hoverRelativePosition:{positionRelativeToCenter:{x:e},boundingBox:{width:t}},centerEnabled:i}){return Math.abs(e)<(i?.5*t:0)/2?"center":e<0?"left":"right"}({hoverRelativePosition:t,centerEnabled:e!==r&&n}),a={itemIndex:e,regionWithinItem:s};if(this.dragHoverTimeout&&(i=this.dragHoverTimeout.hoverLocation,a.itemIndex===i.itemIndex&&a.regionWithinItem===i.regionWithinItem))return;this.cancelHoverTimeout();let l="center"===s?"merge":"reorder",d={action:l,index:function({hoverLocation:{itemIndex:e,regionWithinItem:t},sourceIndex:i}){if("center"===t||e===i)return e;let o="left"===t;return e<i===o?e:o?e-1:e+1}({hoverLocation:a,sourceIndex:r})};if(d.index===r){o.target&&o.target.index!==d.index&&this.setState({dragDrop:{...o,target:d}});return}this.dragHoverTimeout={hoverLocation:a,timeoutId:setTimeout(()=>{this.dragHoverTimeout=null,"reorder"===l?this.setState(({dragDrop:e,sectionIds:t})=>({dragDrop:{...e,target:d,previewIndex:d.index},sectionIds:(0,D.Z)(t,r,d.index)})):this.setState(({dragDrop:e})=>({dragDrop:{...e,target:d}}))},"reorder"===l?200:20)}}),U(this,"handleSectionDragEnd",e=>{let{sections:t,onShowMergeSectionsConfirmationModal:i,onSectionReorder:o}=this.props,{dragDrop:n,sectionIds:r}=this.state,s=n&&n.target;if(this.cancelHoverTimeout(),!e||!n||!s||s.index===n.sourceIndex)return void this.setState({dragDrop:null,sectionIds:t.map(e=>e.id??"")});let{previewIndex:a,sourceIndex:l}=n,{action:d,index:c}=s;if(this.setState({dragDrop:null}),"merge"===d){let e=e=>{let i=r[e];return i&&t.find(({id:e})=>e===i)},o=e(a),n=e(c);o&&n&&i(o,n)}else o(l,c)})}componentDidUpdate(e){let{sections:t}=e,{sections:i}=this.props,o=e=>e.map(({id:e})=>e).join(",");if(t.length!==i.length&&o(t)!==o(i)){this.cancelHoverTimeout();let e=i.map(e=>e.id??"");this.setState({dragDrop:null,sectionIds:e})}}componentWillUnmount(){this.cancelHoverTimeout()}render(){let{allowReordering:e,connectDropTarget:t,isDragWithinBounds:i,sections:o}=this.props,{sectionIds:r}=this.state,s=this.isDragging(),a=o.reduce((e,t)=>t.id?{...e,[t.id]:t}:e,{}),l=(0,g.jsx)(J,{allowReordering:e,board:this.props.board,canEdit:this.props.canEdit,dragDrop:this.state.dragDrop,handleSectionDragBegin:this.handleSectionDragBegin,handleSectionDragEnd:this.handleSectionDragEnd,handleSectionDragHover:this.handleSectionDragHover,isDragging:s,isDragWithinBounds:i??!1,oneTapMovePinsHandler:this.props.oneTapMovePinsHandler,onShowEditSectionModal:this.props.onShowEditSectionModal,organizeMode:this.props.organizeMode,sections:r.map(e=>a[e]).filter(e=>!!e)});return(0,g.jsxs)(n.xu,{width:"100%",children:[e&&t?t((0,g.jsx)("div",{children:l})):l,s&&(0,g.jsx)(F.Z,{})]})}}let Y=(0,W.Z)(H.y.Section)(X);function Q(e){(0,o.useEffect)(()=>{(0,h.Z)("BoardSectionList","/app/www/save/board/BoardDefaultTabContent/BoardSectionList.tsx")},[]);let t=(0,p.Z)(),{allowReordering:i,fetchMore:r,isAtEnd:s,isFetching:a}=e;return(0,g.jsxs)(n.xu,{width:"100%",children:[(0,g.jsx)(n.gr,{fetchMore:r,isAtEnd:s,isFetching:a}),i?(0,g.jsx)(Y,{...e}):(0,g.jsx)(X,{...e}),a&&!s&&(0,g.jsx)(n.xu,{paddingY:6,position:"relative",children:(0,g.jsx)(n.xH,{accessibilityLabel:t._('Loading sections', 'loading state for board sections', 'loading state for board sections'),show:!0})})]})}class ee extends o.Component{constructor(...e){var t,i,o;super(...e),t="handleSectionReorder",i=(e,t)=>{let{board:i,dispatch:o,enableReordering:n,sections:r,viewParameter:s}=this.props;if(!n)return;let a=r[e].id,l=r[t].id,d=(0,D.Z)(r,e,t).map(e=>e.id),c=d.indexOf(a),u=e=>e>=0&&e<d.length,h={boardId:i.id,sourceSectionId:a,targetSectionId:l,...u(c+1)?{sectionIdAfter:d[c+1]}:{},...u(c-1)?{sectionIdBefore:d[c-1]}:{}},p={object_id_str:a,view_type:5,view_parameter:s};o(e=>{let{boardId:t,sectionIdBefore:i,sectionIdAfter:o,sourceSectionId:n,targetSectionId:r}=h;e((0,k._f)({feedType:L.Z.BOARD_SECTIONS,feedId:t,itemType:"boardsection",sourceItemId:n,targetItemId:r}));let s=Object.freeze({});return i&&(s={...s,section_before:i}),o&&(s={...s,section_after:o}),(0,O.Z)({url:"/v3/board/sections/{section}/reorder/",urlParams:{section:n},method:"POST",data:s})}).then(()=>this.props.logContextEvent({event_type:7133,...p}))},(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}componentDidMount(){(0,h.Z)("BoardSections","/app/www/save/board/BoardDefaultTabContent/BoardSections.tsx");let{sectionsInvalidated:e,onLoadedAll:t,sectionsResource:{isFetching:i,refresh:o,isAtEnd:n}}=this.props;e&&!i&&o(),n&&t()}componentDidUpdate(e){let{sectionsInvalidated:t,sectionsResource:i}=e,{sectionsInvalidated:o,isFetching:n,refreshData:r,sectionsResource:s}=this.props;!o||t||n||r(),!i.isAtEnd&&s.isAtEnd&&this.props.onLoadedAll()}render(){let{board:e,enableReordering:t,i18n:i,inBoardOrganizationMode:o,oneTapMovePinsHandler:r,onShowEditSectionModal:s,onShowMergeSectionsConfirmationModal:a,sections:l,sectionsResource:d,viewer:c,orbacActingAs:u}=this.props,{access:h,owner:p}=e,{isLoaded:_,isFetching:m,fetchMore:f,isAtEnd:b}=d;if(!_)return i._('Board sections loading spinner', 'BoardPage.BoardSections.loadingSpinner', 'Accessibility label for the spinner on board sections'),(0,g.jsx)(n.xH,{accessibilityLabel:i._('Board sections loading spinner', ' - ', ' -- '),show:!0});let x=(h||[]).includes("write")||(0,N.D3)(c,p?.id||"",u);return(0,g.jsx)(n.kC,{alignItems:"stretch",justifyContent:"center",children:(0,g.jsx)(Q,{allowReordering:t,board:e,canEdit:x,fetchMore:f,isAtEnd:b,isFetching:m,oneTapMovePinsHandler:r,onSectionReorder:this.handleSectionReorder,onShowEditSectionModal:s,onShowMergeSectionsConfirmationModal:a,organizeMode:o,sections:l})})}}function et(e){let{logContextEvent:t}=(0,r.u)(),i=(0,p.Z)(),o=(0,l.Z)(),n=(0,M.Z)(),s=(0,N.lJ)(o,n),{board:a}=e,{id:d,privacy:c}=a,u=(0,j.Z)({name:"BoardSectionsResource",options:{board_id:d,redux_normalize_feed:!0,...(0,B.Z)(c)&&s?{orbac_subject_id:s}:{}}}),h=(0,T.v9)(e=>e.feeds[`${L.Z.BOARD_SECTIONS}:${d}`]),_=(0,T.v9)(e=>(h||[]).reduce((t,i)=>"boardsection"===i.type&&e.boardsections[i.id]?t.concat([e.boardsections[i.id]]):t,[])),m=null===h,f=(0,T.I0)(),b=o.isAuth&&a.owner?.id===o.id||a.collaborated_by_me;return!(0,B.Z)(c)||s||b?(0,g.jsx)(ee,{...e,dispatch:f,i18n:i,logContextEvent:t,orbacActingAs:n,sections:_,sectionsInvalidated:m,sectionsResource:u,viewer:o}):null}function ei(e){(0,o.useEffect)(()=>{(0,h.Z)("BoardSections","/app/www/save/board/BoardDefaultTabContent/BoardSections.tsx")},[]);let t=(0,l.Z)(),i=(0,M.Z)(),{board:n,isBoardPreviewMode:r}=e,{access:s,featured_board_metadata:a,owner:d}=n||{},{has_expanded_sections:c}=a||{},u=(s||[]).includes("write")||(0,N.D3)(t,d?.id||"",i);return c&&(!u||r)?(0,g.jsx)(R.Z,{...e}):(0,g.jsx)(et,{...e})}var eo=i(101267),en=i(844677),er=i(962935),es=i(768033),ea=i(836643);function el(e){let t=(0,l.Z)(),i=(0,M.Z)(),o=(0,N.lJ)(t,i),{board:n,currentView:r,currentFilter:s,viewer:a}=e,d=(0,j.Z)({name:"BoardFeedResource",options:(0,er.q)(n,a,r,s,o),noCache:n.owner.username===a.username||n.collaborated_by_me}),c=(0,T.v9)(({feeds:t,desktopStories:i})=>(0,ea.Z)(t[`${L.Z.BOARDFEED}:${e.board.id}`],i));return(0,g.jsx)(es.Z,{...e,...c,resource:d})}el.displayName="BoardSectionlessPinGrid";var ed=i(755533),ec=i(849273),eu=i(338170),eh=i(173842),ep=i(93894);function e_({actions:e,board:t,bulkEditSelectedPins:i,currentFilter:h,currentView:p,displayActionBar:_,enableReordering:m,inBoardOrganizationMode:f,inSectionOrganizationMode:b,inSelectAll:x,isBoardPreviewMode:v,isOwnBoard:y,isPinGridSorted:w,onBulkEditPinClick:j,onContentViewChange:S,oneTapMovePinsHandler:Z,onShowEditSectionModal:C,onShowMergeSectionsConfirmationModal:A,refreshFilteredFeed:E,viewParameter:I}){let T=(0,u.gC)()(t.id),B=(T?T.section_count:t.section_count)||0,D=(0,c.WG)()?.boardPinDensity,{logContextEvent:M}=(0,r.u)(),[N,O]=(0,o.useState)(0===B),k=(0,s.Z)(),L=(0,ed.Z)(t.url),R=(0,l.Z)(),H=(0,d.ZP)(),{experimentalGutter:F}=(0,a.Z)(),{is_collaborative:W,pin_count:$}=t,K=(t.access||[]).includes("write"),G=y||t.collaborated_by_me,V=!!("number"==typeof $&&$>=P.Oj&&W&&G);return(0,g.jsxs)(n.xu,{marginBottom:12,children:[(0,g.jsx)(en.Z,{setMaxWidth:!1,children:(0,g.jsxs)(n.xu,{children:[B>0&&(!h||h===eo.c)&&(0,g.jsx)(ei,{board:t,enableReordering:m,inBoardOrganizationMode:!!f,isBoardPreviewMode:v,oneTapMovePinsHandler:Z,onLoadedAll:()=>O(!0),onShowEditSectionModal:C,onShowMergeSectionsConfirmationModal:A,viewParameter:I}),_&&N&&G&&B>0&&(0,g.jsx)(z,{board:t,currentView:p,inBoardOrganizationMode:f,onContentViewChange:S,onOrganizeClick:()=>{if(k)return void k();let{onBoardOrganizeClick:t}=e;M({event_type:101,component:69,element:400,view_type:5}),t&&t(!0)},pinCount:$??0,showSortOptions:V})]})}),"desktop"===H&&N&&(0,g.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:"8px"}},"data-test-id":"board-feed",paddingX:0,position:"relative",children:(0,g.jsx)(el,{board:t,bulkEditSelectedPins:i,currentFilter:h,currentView:p,denseViewSelected:K&&"dense"===D,inBoardOrganizationMode:f,inSectionOrganizationMode:b,inSelectAll:x,isOwnBoard:y,isPinGridSorted:w,onBulkEditPinClick:j,refreshFilteredFeed:E,renderBoardShopModule:(e,t=!1)=>(0,g.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:F?{paddingLeft:F,paddingRight:F}:{}},marginBottom:6,children:(0,g.jsx)(ec.Z,{isTopVariant:t,storyId:e})}),renderFeaturedBoardsStory:e=>(0,g.jsx)(n.xu,{marginBottom:6,children:(0,g.jsx)(eu.Z,{isOwnBoard:y,storyId:e})}),renderFooterStory:e=>f||t.archived_by_me_at||!G?null:(0,g.jsx)(n.xu,{marginBottom:6,children:(0,g.jsx)(en.Z,{children:(0,g.jsx)(ep.Z,{collection:t,storyId:e,url:L})})}),renderMoreIdeas:e=>G?null:(0,g.jsx)(n.xu,{marginBottom:6,children:(0,g.jsx)(eh.default,{storyId:e})}),viewer:R,viewParameter:I})})]})}},592444:function(e,t,i){i.d(t,{Z:()=>u});var o=i(667294),n=i(581722),r=i(230201),s=i(943152),a=i(382802),l=i(24246),d=i(421951),c=i(569510);function u({board:e}){let{logContextEvent:t}=(0,r.u)(),i=(0,l.Z)(),[u,h]=(0,o.useState)(null),p=(0,n.I0)(),{showBlockingActionToast:_}=(0,d.Z)(),m=(0,s.Z)();return{handleShowMergeSectionsConfirmationModal:(e,t)=>{if(m)return void m();h({source:e,target:t})},mergeConfirmationModalProps:u,onConfirm:()=>{if(m)return void m();if(!u)return;let{source:o,target:n}=u;h(null),t({event_type:7173,object_id_str:o.id,aux_data:{merge_flow:"dnd"}}),p((0,c.Z)(e.id,o.id??"",n.id??"")).then(()=>{_({actionType:"merge",board:e,section:n})}).catch(e=>{a.Z.showError(e.message||i._('Failed to merge sections', 'useSectionMergeAction.errorMessage', 'Error message when failed to merge sections'))})}}}},962935:function(e,t,i){i.d(t,{q:()=>n});var o=i(101267);function n(e,t,i,n,r){let{owner:s}=e,a=s?.id===t.id,l="react_grid_pin";return t.isPartner&&a&&(l="partner_react_grid_pin"),{board_id:e.id,board_url:e.url??"",currentFilter:n,field_set_key:l,filter_section_pins:!n||n===o.c,sort:"most_reactions"===i?"most_reactions":"default",layout:e.layout??"",page_size:25,redux_normalize_feed:!0,...r?{orbac_subject_id:r}:Object.freeze({})}}},844677:function(e,t,i){i.d(t,{Z:()=>a});var o=i(686659),n=i(667294),r=i(391995),s=i(785893);function a({children:e,setMaxWidth:t=!0}){return(0,n.useEffect)(()=>{(0,o.Z)("BoardPageLayoutWrap","/app/www/save/board/BoardPageLayoutWrap.tsx")},[]),(0,s.jsx)(r.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:t?(0,s.jsx)(r.xu,{maxWidth:774,paddingX:2,width:"100%",children:e}):(0,s.jsx)(r.xu,{width:"100%",children:e})})}},595403:function(e,t,i){i.d(t,{Z:()=>P});var o=i(686659),n=i(667294),r=i(391995),s=i(257680),a=i(935059),l=i(24246),d=i(200619),c=i(601871),u=i(329577),h=i(696749),p=i(785893);let _=e=>{(0,n.useEffect)(()=>{(0,o.Z)("OneTapMovePill","/app/www/save/board/BoardSectionCard/OneTapMovePill.tsx")},[]);let t=(0,l.Z)(),{numberOfSelectedPins:i}=e;return(0,p.jsx)(r.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:(0,p.jsx)(r.xu,{color:"default",padding:3,rounding:"pill",children:(0,p.jsx)(r.xv,{weight:"bold",children:(0,h.Z)(t.ngettext('Move {{ count }} Pin here', 'Move {{ count }} Pins here', i, 'Call to action overlay on a section to move selected Pins', 'Call to action overlay on a section to move selected Pins'),{count:i})})})})};var m=i(742346);function f({display:e,isHovered:t,mode:i,pins:s}){(0,n.useEffect)(()=>{(0,o.Z)("SectionPreviewPinList","/app/www/save/board/BoardSectionCard/SectionPreviewPinList.tsx")},[]);let a=(0,m.yv)(i),l="dense"===i,d=l?m.Dc.compact:m.Dc.wide,c=l?m.Tb.compact:m.Tb.wide,u=(0,m.EE)(i),h=Array.from(Array(a),(t,i)=>{let o=i===a-1,{description:n,image_large_url:l,image_large_size_pixels:h,image_medium_url:_,image_medium_size_pixels:f}=s[i]||{},g=n?n.trim():"",b=_??l;return(0,p.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{paddingRight:o?void 0:m.st}},"data-test-id":g?"pin-with-alt-text":"pin-missing-alt-text",width:"responsive"===e?`${c/u*100}%`:c,children:(0,p.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:`${d/c*100}%`}},overflow:"hidden",position:"relative",width:"100%",children:(0,p.jsx)(r.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,p.jsx)(r.zd,{height:"responsive"===e?"100%":d,rounding:0,wash:!0,width:"responsive"===e?"100%":c,children:h&&b&&(0,p.jsx)(r.Ee,{alt:"",color:"transparent",fit:"cover",naturalHeight:(f?f.height:h.height)??1,naturalWidth:(f?f.width:h.width)??1,src:b})})})})},i)});return(0,p.jsx)(r.zd,{rounding:400,width:"responsive"===e?"100%":u,children:(0,p.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,p.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:t?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:{}},left:!0,position:"absolute",right:!0,top:!0}),h]})})}var g=i(774838),b=i(720459),x=i(216975);let v=({count:e,size:t})=>{(0,n.useEffect)(()=>{(0,o.Z)("CountTexts","/app/www/save/board/CountTexts.tsx")},[]);let i=(0,l.Z)(),{locale:s}=(0,g.B)(),a=(0,b.Z)(),d=(0,x.nk)(i.ngettext('{{ count }} Pin', '{{ count }} Pins', e, 'profile.ProfilePage.board.BoardCard.PinsCount', 'label for n amount of pins'),{count:a(s,e,{})});return(0,p.jsx)(r.xu,{children:(0,p.jsx)(r.xv,{color:"default",inline:!0,size:t,children:d})})};function y({children:e,mode:t}){return(0,p.jsx)(r.qd,{accessibilityLevel:2,lineClamp:"dense"===t?void 0:1,size:"dense"===t?"300":"400",children:e})}function w({children:e,display:t,displayEditIcon:i,href:s,mode:a,mouseCursor:d,onEditClick:c,onTouch:u,pinCount:h,title:_}){(0,n.useEffect)(()=>{(0,o.Z)("SectionRep","/app/www/save/board/BoardSectionCard/SectionRep.tsx")},[]);let f=(0,l.Z)(),{isRTL:b}=(0,g.B)(),x=(0,p.jsxs)(r.xu,{position:"relative",width:"responsive"===t?"100%":(0,m.EE)(a),children:[e,(0,p.jsx)(r.kC,{alignItems:"start",justifyContent:"between",width:"100%",children:(0,p.jsxs)(r.xu,{flex:"grow",padding:2,children:[(0,p.jsx)(y,{mode:a,children:_}),(0,p.jsx)(r.xu,{marginTop:1,children:(0,p.jsx)(v,{count:h,size:"100"})})]})}),s&&(0,p.jsx)(r.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,p.jsx)(r.Tg,{fullHeight:!0,fullWidth:!0,href:s,rounding:200,children:(0,p.jsx)(r.xu,{display:"visuallyHidden",height:"100%",width:"100%",children:f._('See Pins', 'BoardSectionCard.SectionRep.accessibilityTextLink', 'accessibility label for the board section link')})})}),i&&(0,p.jsx)(r.xu,{bottom:!0,left:b,marginBottom:15,padding:2,position:"absolute",right:!b,children:(0,p.jsx)(r.hU,{accessibilityHaspopup:!0,accessibilityLabel:f._('Edit', 'BoardSectionCard.SectionRep.EditIcon', 'accessibility label for the board section name edit button'),bgColor:"default",icon:"pencil",iconColor:"default",onClick:c,size:"sm"})})]});return u?(0,p.jsx)(r.iP,{fullWidth:"responsive"===t,mouseCursor:d,onTap:u,rounding:400,children:x}):x}let P=e=>{let t;(0,n.useEffect)(()=>{(0,o.Z)("BoardSectionCard","/app/www/save/board/BoardSectionCard/BoardSectionCard.tsx")},[]);let{board:i,boardSection:h,canEdit:m,display:g,focused:b,hovered:x,inCollageCreation:v,inOrganizationMode:y,isDragging:P,isMergeTarget:j,onBlur:S,oneTapMovePinsHandler:Z,onFocus:C,onMouseEnter:A,onMouseLeave:E,onShowEditSectionModal:I}=e,z=(0,l.Z)(),T=(0,a.Z)(),B=(0,d.Z)(),D=(0,c.lJ)(T,B),M=D&&(0,s.Z)(i.privacy)?`?orbac_subject_id=${D}`:"",{slug:N,title:O,preview_pins:k=[]}=h,L=(0,u.WG)()?.boardPinDensity??"",R=Z&&Z.numberOfSelectedPins;R&&Z&&(t=()=>{Z.moveToSection(h)});let H="pointer";P?H="grabbing":!R&&y&&(H="grab");let F=!!m&&!P&&(x||b),W=Z&&Z.numberOfSelectedPins>0&&!!R&&x&&!P&&(0,p.jsx)(_,{numberOfSelectedPins:Z.numberOfSelectedPins});return(0,p.jsx)(r.xu,{"aria-label":z._('Board section', 'BoardSectionCard.ariaLabel', 'aria label for the board section card'),"data-test-id":`section-${h.title??""}`,onBlur:S,onFocus:C,onMouseEnter:A,onMouseLeave:E,role:"group",children:(0,p.jsx)(w,{display:g,displayEditIcon:F,href:y||v?void 0:`${i.url??""}${N??""}/${M}`,mode:L,mouseCursor:H,onEditClick:({event:e})=>{e.stopPropagation(),e.preventDefault(),I(h)},onTouch:t,pinCount:h.pin_count??0,title:O??"",children:(0,p.jsxs)(r.xu,{position:"relative",children:[(0,p.jsx)(f,{display:g,isHovered:x||j||b,mode:L,pins:k??[]}),W]})})})}},742346:function(e,t,i){i.d(t,{Dc:()=>o,EE:()=>a,Tb:()=>n,st:()=>r,yv:()=>s});let o={compact:157,wide:141},n={compact:118,wide:106},r=1;function s(e){return"dense"===e?2:3}function a(e){return(("dense"===e?n.compact:n.wide)+r)*s(e)-r}},755533:function(e,t,i){i.d(t,{Z:()=>o});function o(e=""){return`${e}_tools/more-ideas/`}},93894:function(e,t,i){i.d(t,{Z:()=>g});var o,n=i(686659),r=i(667294),s=i(581722);i(167912);var a=i(391995),l=i(230201),d=i(183e3),c=i(24246),u=i(174481),h=i(775309),p=i(785893);let _=(void 0!==o||(o=i(399465)).hash&&"f6776ff7c6fc3ce9a1f4b72a5dbaa0c2"!==o.hash&&console.error("The definition of 'MoreIdeasPreviewStory_story' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o);function m({pin:e}){return(0,p.jsx)(a.zd,{rounding:400,width:138,children:(0,p.jsx)(h.Z,{height:207,pin:e&&"Pin"===e.__typename?{imageUrl:e.images_474x?.url??"",dominantColor:e.dominantColor??"",description:e.description??""}:null,width:138})})}function f({collection:e,storyKey:t,url:i}){(0,r.useEffect)(()=>{(0,n.Z)("MoreIdeasPreviewStory","/app/www/save/board/MoreIdeasPreviewStory/MoreIdeasPreviewStory.tsx")},[]);let{logContextEvent:o}=(0,l.u)(),s=(0,c.Z)(),{isHovering:h,hoverHandlers:f}=(0,u.Z)(),g=(0,d.Z)(_,t);if(!g)return null;let b=g.objects&&g.objects.filter(e=>"Pin"===e.__typename&&"pin"===e.type)||[];return(0,p.jsx)("div",{className:"moreIdeasOnBoard",children:(0,p.jsx)(a.Tg,{fullWidth:!1,href:`${i}?ideas_referrer=${g.referringSource??""}`,onMouseEnter:f.onMouseOver,onMouseLeave:f.onMouseLeave,onTap:()=>o({event_type:101,element:10600,view_type:"boardsection"===e.type?164:5,object_id_str:e.id,view_parameter:3069}),rounding:400,children:(0,p.jsxs)(a.xu,{alignItems:"start",color:h?"secondary":"default",direction:"column",display:"flex",justifyContent:"start",marginEnd:-3,paddingX:3,paddingY:2,rounding:400,width:"100%",children:[(0,p.jsx)(a.xu,{padding:2,children:(0,p.jsx)(a.qd,{lineClamp:1,size:"400",children:"boardsection"===e.type?s._('Find some ideas for this section:', 'Call-to-action text that upsells more ideas tab for an empty section', 'Call-to-action text that upsells more ideas tab for an empty section'):s._('Find some ideas for this board:', 'Call-to-action text that upsells more ideas tab for an empty board', 'Call-to-action text that upsells more ideas tab for an empty board')})}),(0,p.jsx)(a.xu,{display:"flex",justifyContent:"between",padding:2,role:"list",width:"100%",children:[...[,,,,,].keys()].map(e=>{let t=b[e],i=t&&"Pin"===t.__typename&&t.description?t.description.trim():"";return(0,p.jsx)(a.xu,{"data-test-id":i?"pin-with-alt-text":"pin-missing-alt-text",role:"listitem",children:(0,p.jsx)(m,{pin:t})},`${t&&"Pin"===t.__typename&&t.entityId?t.entityId:e}`)})})]})})})}function g(e){(0,r.useEffect)(()=>{(0,n.Z)("MoreIdeasPreviewStory","/app/www/save/board/MoreIdeasPreviewStory/MoreIdeasPreviewStory.tsx")},[]);let t=(0,s.v9)(t=>t.desktopStories[e.storyId]),i="board_ideas_preview_detailed"===t.story_type?t:void 0;return(0,p.jsx)(f,{...e,storyKey:void 0!==i?{type:"Legacy",data:i}:null})}},775309:function(e,t,i){i.d(t,{Z:()=>c});var o=i(686659),n=i(667294),r=i(391995),s=i(24246),a=i(696749),l=i(785893);function d({pinCount:e,height:t,size:i}){let o=(0,s.Z)(),n=(0,a.Z)(o._('+{{ pinCount }}', '+N count overlay on pin selections', '+N count overlay on pin selections'),{pinCount:e});return(0,l.jsx)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0,0,0,.2)"}},display:"flex",height:t,justifyContent:"center",children:"sm"===i?(0,l.jsx)(r.xv,{color:"light",size:"200",weight:"bold",children:n}):(0,l.jsx)(r.qd,{color:"light",size:"600",children:n})})}function c({additionalPinCount:e,additionalPinCountSize:t="lg",pin:i,width:s,height:a,rounded:c}){return(0,n.useEffect)(()=>{(0,o.Z)("PreviewPin","/app/www/save/board/PreviewPin/PreviewPin.tsx")},[]),(0,l.jsx)(r.zd,{height:a,rounding:400*!!c,wash:!0,width:s,children:i&&(0,l.jsx)(r.Ee,{alt:i.description,color:i.dominantColor,fit:"cover",naturalHeight:a,naturalWidth:s,src:i.imageUrl,children:!!e&&(0,l.jsx)(d,{height:a,pinCount:e,size:t})})})}},900842:function(e,t,i){i.d(t,{Z:()=>s});var o=i(4533),n=i(34550);let r=Object.freeze({});function s(e,t){let i=n.ZP.getItem(o.iT)||r;return(e.isAuth&&i[e.id]||{})[t.id]||null}},794074:function(e,t,i){i.d(t,{Z:()=>n});var o=i(501010);function n(){return(0,o.Z)().checkExperiment("web_react_router_v6").anyEnabled}},520803:function(e,t,i){i.d(t,{Z:()=>a});var o=i(667294),n=i(616550),r=i(312048),s=i(794074);function a(){let e=(0,o.useRef)(null);return null===e.current&&(e.current=(0,s.Z)()),(e.current?function(){let e=(0,r.UO)(),t=(0,r.TH)(),i=Object.entries(e).reduce((e,[t,i])=>(i&&(e[i]=t),e),{}),n=t.pathname.split("/").map(e=>i[e]?`:${i[e]}`:e).join("/");return(0,o.useMemo)(()=>({isExact:!0,params:e,path:n,url:t.pathname}),[e,n,t.pathname])}:n.$B)()}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/98135-1adeaeaa29683853.mjs.map